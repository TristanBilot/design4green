{"ast":null,"code":"import { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\n/**\n * Focus module is used to handle certain action on focus elements in keyboard navigations.\n */\n\nvar FocusModule =\n/** @class */\nfunction () {\n  function FocusModule(parent) {\n    this.parent = parent;\n    this.activeElement = null;\n    this.previousActiveElement = null;\n  }\n\n  FocusModule.prototype.getActiveElement = function (isPreviousActiveElement) {\n    return isPreviousActiveElement ? this.previousActiveElement : this.activeElement;\n  };\n\n  FocusModule.prototype.setActiveElement = function (element) {\n    this.previousActiveElement = this.activeElement;\n    this.activeElement = element;\n  };\n  /**\n   * To perform key interaction in Gantt\n   *\n   * @param {KeyboardEventArgs} e .\n   * @returns {void} .\n   * @private\n   */\n\n\n  FocusModule.prototype.onKeyPress = function (e) {\n    var ganttObj = this.parent;\n    var expandedRecords = ganttObj.getExpandedRecords(ganttObj.currentViewData);\n    var targetElement = this.parent.focusModule.getActiveElement();\n\n    if (e.action === 'home' || e.action === 'end' || e.action === 'downArrow' || e.action === 'upArrow' || e.action === 'delete' || e.action === 'rightArrow' || e.action === 'leftArrow' || e.action === 'focusTask' || e.action === 'focusSearch' || e.action === 'expandAll' || e.action === 'collapseAll') {\n      if (!isNullOrUndefined(ganttObj.editModule) && !isNullOrUndefined(ganttObj.editModule.cellEditModule) && ganttObj.editModule.cellEditModule.isCellEdit === true) {\n        return;\n      }\n    }\n\n    if (ganttObj.isAdaptive) {\n      if (e.action === 'addRowDialog' || e.action === 'editRowDialog' || e.action === 'delete' || e.action === 'addRow') {\n        if (ganttObj.selectionModule && ganttObj.selectionSettings.type === 'Multiple') {\n          ganttObj.selectionModule.hidePopUp();\n          document.getElementsByClassName('e-gridpopup')[0].style.display = 'none';\n        }\n      }\n    }\n\n    switch (e.action) {\n      case 'home':\n        if (ganttObj.selectionModule && ganttObj.selectionSettings.mode !== 'Cell') {\n          if (ganttObj.selectedRowIndex === 0) {\n            return;\n          }\n\n          ganttObj.selectionModule.selectRow(0, false, true);\n        }\n\n        break;\n\n      case 'end':\n        if (ganttObj.selectionModule && ganttObj.selectionSettings.mode !== 'Cell') {\n          var currentSelectingRecord = expandedRecords[expandedRecords.length - 1];\n\n          if (ganttObj.selectedRowIndex === ganttObj.flatData.indexOf(currentSelectingRecord)) {\n            return;\n          }\n\n          ganttObj.selectionModule.selectRow(ganttObj.flatData.indexOf(currentSelectingRecord), false, true);\n        }\n\n        break;\n\n      case 'downArrow':\n      case 'upArrow':\n        {\n          var searchElement = ganttObj.element.querySelector('#' + ganttObj.element.id + '_searchbar');\n\n          if (searchElement && searchElement.parentElement.classList.contains('e-input-focus')) {\n            ganttObj.selectionModule.clearSelection();\n          }\n\n          if (!ganttObj.element.classList.contains('e-scroll-disabled')) {\n            this.upDownKeyNavigate(e);\n\n            if (!isNullOrUndefined(targetElement) && !isNullOrUndefined(targetElement.closest('.e-chart-row'))) {\n              ganttObj.ganttChartModule.manageFocus(this.getActiveElement(), 'remove', true);\n            }\n          }\n\n          break;\n        }\n\n      case 'expandAll':\n        ganttObj.ganttChartModule.expandCollapseAll('expand');\n        break;\n\n      case 'collapseAll':\n        ganttObj.ganttChartModule.expandCollapseAll('collapse');\n        break;\n\n      case 'expandRow':\n      case 'collapseRow':\n        this.expandCollapseKey(e);\n        break;\n\n      case 'saveRequest':\n        if (!isNullOrUndefined(ganttObj.editModule) && !isNullOrUndefined(ganttObj.editModule.cellEditModule) && ganttObj.editModule.cellEditModule.isCellEdit) {\n          var col = ganttObj.editModule.cellEditModule.editedColumn;\n\n          if (col.field === ganttObj.columnMapping.duration && !isNullOrUndefined(col.edit) && !isNullOrUndefined(col.edit.read)) {\n            var textBox = e.target.ej2_instances[0];\n            var textValue = e.target.value;\n            var ganttProp = ganttObj.currentViewData[ganttObj.selectedRowIndex].ganttProperties;\n            var tempValue = void 0;\n\n            if (col.field === ganttObj.columnMapping.duration) {\n              tempValue = !isNullOrUndefined(col.edit) && !isNullOrUndefined(col.edit.read) ? col.edit.read() : // eslint-disable-next-line\n              !isNullOrUndefined(col.valueAccessor) ? col.valueAccessor(ganttObj.columnMapping.duration, ganttObj.editedRecords, col) : ganttObj.dataOperation.getDurationString(ganttProp.duration, ganttProp.durationUnit);\n\n              if (textValue !== tempValue.toString()) {\n                textBox.value = textValue;\n                textBox.dataBind();\n              }\n            }\n          }\n\n          if (ganttObj.editModule.dialogModule.dialogObj && getValue('dialogOpen', ganttObj.editModule.dialogModule.dialogObj)) {\n            return;\n          }\n\n          ganttObj.editModule.cellEditModule.isCellEdit = false;\n          ganttObj.treeGrid.grid.saveCell();\n          var focussedElement = ganttObj.element.querySelector('.e-treegrid');\n          focussedElement.focus();\n        }\n\n        if (!isNullOrUndefined(this.parent.onTaskbarClick) && !isNullOrUndefined(targetElement) && !isNullOrUndefined(targetElement.closest('.e-chart-row'))) {\n          var target = e.target;\n          var taskbarElement = targetElement.querySelector('.e-gantt-parent-taskbar,' + '.e-gantt-child-taskbar,.e-gantt-milestone');\n\n          if (taskbarElement) {\n            this.parent.ganttChartModule.onTaskbarClick(e, target, taskbarElement);\n          }\n        }\n\n        break;\n\n      case 'cancelRequest':\n        if (!isNullOrUndefined(ganttObj.editModule) && !isNullOrUndefined(ganttObj.editModule.cellEditModule)) {\n          ganttObj.editModule.cellEditModule.isCellEdit = false;\n\n          if (!isNullOrUndefined(ganttObj.toolbarModule)) {\n            ganttObj.toolbarModule.refreshToolbarItems();\n          }\n        }\n\n        break;\n\n      case 'addRow':\n        {\n          if (isNullOrUndefined(document.getElementById(this.parent.element.id + '_dialog'))) {\n            e.preventDefault();\n            var focussedElement = ganttObj.element.querySelector('.e-gantt-chart');\n            focussedElement.focus();\n            ganttObj.addRecord();\n          }\n\n          break;\n        }\n\n      case 'addRowDialog':\n        e.preventDefault();\n\n        if (ganttObj.editModule && ganttObj.editModule.dialogModule && ganttObj.editSettings.allowAdding) {\n          if (ganttObj.editModule.dialogModule.dialogObj && getValue('dialogOpen', ganttObj.editModule.dialogModule.dialogObj)) {\n            return;\n          }\n\n          ganttObj.editModule.dialogModule.openAddDialog();\n        }\n\n        break;\n\n      case 'editRowDialog':\n        {\n          e.preventDefault();\n          var focussedTreeElement = ganttObj.element.querySelector('.e-treegrid');\n          focussedTreeElement.focus();\n\n          if (ganttObj.editModule && ganttObj.editModule.dialogModule && ganttObj.editSettings.allowEditing) {\n            if (ganttObj.editModule.dialogModule.dialogObj && getValue('dialogOpen', ganttObj.editModule.dialogModule.dialogObj)) {\n              return;\n            }\n\n            ganttObj.editModule.dialogModule.openToolbarEditDialog();\n          }\n\n          break;\n        }\n\n      case 'delete':\n        if (ganttObj.selectionModule && ganttObj.editModule && (!ganttObj.editModule.dialogModule.dialogObj || ganttObj.editModule.dialogModule.dialogObj && !ganttObj.editModule.dialogModule.dialogObj.visible) && (!ganttObj.editSettings.allowTaskbarEditing || ganttObj.editSettings.allowTaskbarEditing && !ganttObj.editModule.taskbarEditModule.touchEdit)) {\n          if (ganttObj.selectionSettings.mode !== 'Cell' && ganttObj.selectionModule.selectedRowIndexes.length || ganttObj.selectionSettings.mode === 'Cell' && ganttObj.selectionModule.getSelectedRowCellIndexes().length) {\n            ganttObj.editModule.startDeleteAction();\n          }\n        }\n\n        break;\n\n      case 'focusTask':\n        {\n          e.preventDefault();\n          var selectedId = void 0;\n\n          if (ganttObj.selectionModule) {\n            var currentViewData = ganttObj.currentViewData;\n\n            if (ganttObj.selectionSettings.mode !== 'Cell' && !isNullOrUndefined(currentViewData[ganttObj.selectedRowIndex])) {\n              selectedId = ganttObj.currentViewData[ganttObj.selectedRowIndex].ganttProperties.rowUniqueID;\n            } else if (ganttObj.selectionSettings.mode === 'Cell' && ganttObj.selectionModule.getSelectedRowCellIndexes().length > 0) {\n              var selectCellIndex = ganttObj.selectionModule.getSelectedRowCellIndexes();\n              selectedId = currentViewData[selectCellIndex[selectCellIndex.length - 1].rowIndex].ganttProperties.rowUniqueID;\n            }\n          }\n\n          if (selectedId) {\n            ganttObj.scrollToTask(selectedId.toString());\n          }\n\n          break;\n        }\n\n      case 'focusSearch':\n        {\n          if (ganttObj.element.querySelector('#' + ganttObj.element.id + '_searchbar')) {\n            var searchElement = ganttObj.element.querySelector('#' + ganttObj.element.id + '_searchbar');\n            searchElement.setAttribute('tabIndex', '-1');\n            searchElement.focus();\n          }\n\n          break;\n        }\n\n      case 'tab':\n      case 'shiftTab':\n        if (!ganttObj.element.classList.contains('e-scroll-disabled')) {\n          ganttObj.ganttChartModule.onTabAction(e);\n        }\n\n        break;\n\n      case 'contextMenu':\n        {\n          var contextMenu = document.getElementById(this.parent.element.id + '_contextmenu').ej2_instances[0];\n          var containerPosition = this.parent.getOffsetRect(e.target);\n          var top_1 = containerPosition.top + containerPosition.height / 2;\n          var left = containerPosition.left + containerPosition.width / 2;\n          this.setActiveElement(e.target);\n          contextMenu.open(top_1, left);\n          e.preventDefault();\n          break;\n        }\n\n      default:\n        {\n          var eventArgs = {\n            requestType: 'keyPressed',\n            action: e.action,\n            keyEvent: e\n          };\n          ganttObj.trigger('actionComplete', eventArgs);\n          break;\n        }\n    }\n  };\n\n  FocusModule.prototype.upDownKeyNavigate = function (e) {\n    e.preventDefault();\n    var ganttObj = this.parent;\n    var expandedRecords = ganttObj.getExpandedRecords(ganttObj.currentViewData);\n\n    if (ganttObj.selectionModule) {\n      if (ganttObj.selectionSettings.mode !== 'Cell' && ganttObj.selectedRowIndex !== -1) {\n        var selectedItem = ganttObj.currentViewData[ganttObj.selectedRowIndex];\n        var focusedRowIndex = this.parent.ganttChartModule.focusedRowIndex;\n        var selectingRowIndex = focusedRowIndex > -1 ? focusedRowIndex : expandedRecords.indexOf(selectedItem);\n        var currentSelectingRecord = e.action === 'downArrow' ? expandedRecords[selectingRowIndex + 1] : expandedRecords[selectingRowIndex - 1];\n        ganttObj.selectionModule.selectRow(ganttObj.currentViewData.indexOf(currentSelectingRecord), false, true);\n      } else if (ganttObj.selectionSettings.mode === 'Cell' && ganttObj.selectionModule.getSelectedRowCellIndexes().length > 0) {\n        var selectCellIndex = ganttObj.selectionModule.getSelectedRowCellIndexes();\n        var selectedCellItem = selectCellIndex[selectCellIndex.length - 1];\n        var currentCellIndex = selectedCellItem.cellIndexes[selectedCellItem.cellIndexes.length - 1];\n        var selectedItem = ganttObj.currentViewData[selectedCellItem.rowIndex];\n        var selectingRowIndex = expandedRecords.indexOf(selectedItem);\n        var currentSelectingRecord = e.action === 'downArrow' ? expandedRecords[selectingRowIndex + 1] : expandedRecords[selectingRowIndex - 1];\n        var cellInfo = {\n          rowIndex: ganttObj.currentViewData.indexOf(currentSelectingRecord),\n          cellIndex: currentCellIndex\n        };\n        ganttObj.selectionModule.selectCell(cellInfo);\n      }\n\n      this.parent.ganttChartModule.focusedRowIndex = this.parent.selectedRowIndex;\n    }\n  };\n\n  FocusModule.prototype.expandCollapseKey = function (e) {\n    var ganttObj = this.parent;\n\n    if (ganttObj.selectionModule && ganttObj.selectedRowIndex !== -1) {\n      var selectedRowIndex = void 0;\n\n      if (ganttObj.selectionSettings.mode !== 'Cell') {\n        selectedRowIndex = ganttObj.selectedRowIndex;\n      } else if (ganttObj.selectionSettings.mode === 'Cell' && ganttObj.selectionModule.getSelectedRowCellIndexes().length > 0) {\n        var selectCellIndex = ganttObj.selectionModule.getSelectedRowCellIndexes();\n        selectedRowIndex = selectCellIndex[selectCellIndex.length - 1].rowIndex;\n      }\n\n      if (e.action === 'expandRow') {\n        ganttObj.expandByIndex(selectedRowIndex);\n      } else {\n        ganttObj.collapseByIndex(selectedRowIndex);\n      }\n    }\n  };\n\n  return FocusModule;\n}();\n\nexport { FocusModule };","map":{"version":3,"sources":["/Users/tristanbilot/Desktop/Design4green/design4green/node_modules/@syncfusion/ej2-gantt/src/gantt/actions/keyboard.js"],"names":["isNullOrUndefined","getValue","FocusModule","parent","activeElement","previousActiveElement","prototype","getActiveElement","isPreviousActiveElement","setActiveElement","element","onKeyPress","e","ganttObj","expandedRecords","getExpandedRecords","currentViewData","targetElement","focusModule","action","editModule","cellEditModule","isCellEdit","isAdaptive","selectionModule","selectionSettings","type","hidePopUp","document","getElementsByClassName","style","display","mode","selectedRowIndex","selectRow","currentSelectingRecord","length","flatData","indexOf","searchElement","querySelector","id","parentElement","classList","contains","clearSelection","upDownKeyNavigate","closest","ganttChartModule","manageFocus","expandCollapseAll","expandCollapseKey","col","editedColumn","field","columnMapping","duration","edit","read","textBox","target","ej2_instances","textValue","value","ganttProp","ganttProperties","tempValue","valueAccessor","editedRecords","dataOperation","getDurationString","durationUnit","toString","dataBind","dialogModule","dialogObj","treeGrid","grid","saveCell","focussedElement","focus","onTaskbarClick","taskbarElement","toolbarModule","refreshToolbarItems","getElementById","preventDefault","addRecord","editSettings","allowAdding","openAddDialog","focussedTreeElement","allowEditing","openToolbarEditDialog","visible","allowTaskbarEditing","taskbarEditModule","touchEdit","selectedRowIndexes","getSelectedRowCellIndexes","startDeleteAction","selectedId","rowUniqueID","selectCellIndex","rowIndex","scrollToTask","setAttribute","onTabAction","contextMenu","containerPosition","getOffsetRect","top_1","top","height","left","width","open","eventArgs","requestType","keyEvent","trigger","selectedItem","focusedRowIndex","selectingRowIndex","selectedCellItem","currentCellIndex","cellIndexes","cellInfo","cellIndex","selectCell","expandByIndex","collapseByIndex"],"mappings":"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","sourcesContent":["import { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\n/**\n * Focus module is used to handle certain action on focus elements in keyboard navigations.\n */\nvar FocusModule = /** @class */ (function () {\n    function FocusModule(parent) {\n        this.parent = parent;\n        this.activeElement = null;\n        this.previousActiveElement = null;\n    }\n    FocusModule.prototype.getActiveElement = function (isPreviousActiveElement) {\n        return isPreviousActiveElement ? this.previousActiveElement : this.activeElement;\n    };\n    FocusModule.prototype.setActiveElement = function (element) {\n        this.previousActiveElement = this.activeElement;\n        this.activeElement = element;\n    };\n    /**\n     * To perform key interaction in Gantt\n     *\n     * @param {KeyboardEventArgs} e .\n     * @returns {void} .\n     * @private\n     */\n    FocusModule.prototype.onKeyPress = function (e) {\n        var ganttObj = this.parent;\n        var expandedRecords = ganttObj.getExpandedRecords(ganttObj.currentViewData);\n        var targetElement = this.parent.focusModule.getActiveElement();\n        if (e.action === 'home' || e.action === 'end' || e.action === 'downArrow' || e.action === 'upArrow' || e.action === 'delete' ||\n            e.action === 'rightArrow' || e.action === 'leftArrow' || e.action === 'focusTask' || e.action === 'focusSearch' ||\n            e.action === 'expandAll' || e.action === 'collapseAll') {\n            if (!isNullOrUndefined(ganttObj.editModule) && !isNullOrUndefined(ganttObj.editModule.cellEditModule) &&\n                ganttObj.editModule.cellEditModule.isCellEdit === true) {\n                return;\n            }\n        }\n        if (ganttObj.isAdaptive) {\n            if (e.action === 'addRowDialog' || e.action === 'editRowDialog' || e.action === 'delete'\n                || e.action === 'addRow') {\n                if (ganttObj.selectionModule && ganttObj.selectionSettings.type === 'Multiple') {\n                    ganttObj.selectionModule.hidePopUp();\n                    document.getElementsByClassName('e-gridpopup')[0].style.display = 'none';\n                }\n            }\n        }\n        switch (e.action) {\n            case 'home':\n                if (ganttObj.selectionModule && ganttObj.selectionSettings.mode !== 'Cell') {\n                    if (ganttObj.selectedRowIndex === 0) {\n                        return;\n                    }\n                    ganttObj.selectionModule.selectRow(0, false, true);\n                }\n                break;\n            case 'end':\n                if (ganttObj.selectionModule && ganttObj.selectionSettings.mode !== 'Cell') {\n                    var currentSelectingRecord = expandedRecords[expandedRecords.length - 1];\n                    if (ganttObj.selectedRowIndex === ganttObj.flatData.indexOf(currentSelectingRecord)) {\n                        return;\n                    }\n                    ganttObj.selectionModule.selectRow(ganttObj.flatData.indexOf(currentSelectingRecord), false, true);\n                }\n                break;\n            case 'downArrow':\n            case 'upArrow':\n                {\n                    var searchElement = ganttObj.element.querySelector('#' + ganttObj.element.id + '_searchbar');\n                    if (searchElement && searchElement.parentElement.classList.contains('e-input-focus')) {\n                        ganttObj.selectionModule.clearSelection();\n                    }\n                    if (!ganttObj.element.classList.contains('e-scroll-disabled')) {\n                        this.upDownKeyNavigate(e);\n                        if (!isNullOrUndefined(targetElement) && !isNullOrUndefined(targetElement.closest('.e-chart-row'))) {\n                            ganttObj.ganttChartModule.manageFocus(this.getActiveElement(), 'remove', true);\n                        }\n                    }\n                    break;\n                }\n            case 'expandAll':\n                ganttObj.ganttChartModule.expandCollapseAll('expand');\n                break;\n            case 'collapseAll':\n                ganttObj.ganttChartModule.expandCollapseAll('collapse');\n                break;\n            case 'expandRow':\n            case 'collapseRow':\n                this.expandCollapseKey(e);\n                break;\n            case 'saveRequest':\n                if (!isNullOrUndefined(ganttObj.editModule) && !isNullOrUndefined(ganttObj.editModule.cellEditModule) &&\n                    ganttObj.editModule.cellEditModule.isCellEdit) {\n                    var col = ganttObj.editModule.cellEditModule.editedColumn;\n                    if (col.field === ganttObj.columnMapping.duration && !isNullOrUndefined(col.edit) &&\n                        !isNullOrUndefined(col.edit.read)) {\n                        var textBox = e.target.ej2_instances[0];\n                        var textValue = e.target.value;\n                        var ganttProp = ganttObj.currentViewData[ganttObj.selectedRowIndex].ganttProperties;\n                        var tempValue = void 0;\n                        if (col.field === ganttObj.columnMapping.duration) {\n                            tempValue = !isNullOrUndefined(col.edit) && !isNullOrUndefined(col.edit.read) ? col.edit.read() :\n                                // eslint-disable-next-line\n                                !isNullOrUndefined(col.valueAccessor) ? col.valueAccessor(ganttObj.columnMapping.duration, ganttObj.editedRecords, col) :\n                                    ganttObj.dataOperation.getDurationString(ganttProp.duration, ganttProp.durationUnit);\n                            if (textValue !== tempValue.toString()) {\n                                textBox.value = textValue;\n                                textBox.dataBind();\n                            }\n                        }\n                    }\n                    if (ganttObj.editModule.dialogModule.dialogObj && getValue('dialogOpen', ganttObj.editModule.dialogModule.dialogObj)) {\n                        return;\n                    }\n                    ganttObj.editModule.cellEditModule.isCellEdit = false;\n                    ganttObj.treeGrid.grid.saveCell();\n                    var focussedElement = ganttObj.element.querySelector('.e-treegrid');\n                    focussedElement.focus();\n                }\n                if (!isNullOrUndefined(this.parent.onTaskbarClick) && !isNullOrUndefined(targetElement)\n                    && !isNullOrUndefined(targetElement.closest('.e-chart-row'))) {\n                    var target = e.target;\n                    var taskbarElement = targetElement.querySelector('.e-gantt-parent-taskbar,' +\n                        '.e-gantt-child-taskbar,.e-gantt-milestone');\n                    if (taskbarElement) {\n                        this.parent.ganttChartModule.onTaskbarClick(e, target, taskbarElement);\n                    }\n                }\n                break;\n            case 'cancelRequest':\n                if (!isNullOrUndefined(ganttObj.editModule) && !isNullOrUndefined(ganttObj.editModule.cellEditModule)) {\n                    ganttObj.editModule.cellEditModule.isCellEdit = false;\n                    if (!isNullOrUndefined(ganttObj.toolbarModule)) {\n                        ganttObj.toolbarModule.refreshToolbarItems();\n                    }\n                }\n                break;\n            case 'addRow':\n                {\n                    if (isNullOrUndefined(document.getElementById(this.parent.element.id + '_dialog'))) {\n                        e.preventDefault();\n                        var focussedElement = ganttObj.element.querySelector('.e-gantt-chart');\n                        focussedElement.focus();\n                        ganttObj.addRecord();\n                    }\n                    break;\n                }\n            case 'addRowDialog':\n                e.preventDefault();\n                if (ganttObj.editModule && ganttObj.editModule.dialogModule && ganttObj.editSettings.allowAdding) {\n                    if (ganttObj.editModule.dialogModule.dialogObj && getValue('dialogOpen', ganttObj.editModule.dialogModule.dialogObj)) {\n                        return;\n                    }\n                    ganttObj.editModule.dialogModule.openAddDialog();\n                }\n                break;\n            case 'editRowDialog':\n                {\n                    e.preventDefault();\n                    var focussedTreeElement = ganttObj.element.querySelector('.e-treegrid');\n                    focussedTreeElement.focus();\n                    if (ganttObj.editModule && ganttObj.editModule.dialogModule && ganttObj.editSettings.allowEditing) {\n                        if (ganttObj.editModule.dialogModule.dialogObj && getValue('dialogOpen', ganttObj.editModule.dialogModule.dialogObj)) {\n                            return;\n                        }\n                        ganttObj.editModule.dialogModule.openToolbarEditDialog();\n                    }\n                    break;\n                }\n            case 'delete':\n                if (ganttObj.selectionModule && ganttObj.editModule && (!ganttObj.editModule.dialogModule.dialogObj ||\n                    (ganttObj.editModule.dialogModule.dialogObj &&\n                        !ganttObj.editModule.dialogModule.dialogObj.visible)) && (!ganttObj.editSettings.allowTaskbarEditing\n                    || (ganttObj.editSettings.allowTaskbarEditing && !ganttObj.editModule.taskbarEditModule.touchEdit))) {\n                    if ((ganttObj.selectionSettings.mode !== 'Cell' && ganttObj.selectionModule.selectedRowIndexes.length)\n                        || (ganttObj.selectionSettings.mode === 'Cell' && ganttObj.selectionModule.getSelectedRowCellIndexes().length)) {\n                        ganttObj.editModule.startDeleteAction();\n                    }\n                }\n                break;\n            case 'focusTask':\n                {\n                    e.preventDefault();\n                    var selectedId = void 0;\n                    if (ganttObj.selectionModule) {\n                        var currentViewData = ganttObj.currentViewData;\n                        if (ganttObj.selectionSettings.mode !== 'Cell' &&\n                            !isNullOrUndefined(currentViewData[ganttObj.selectedRowIndex])) {\n                            selectedId = ganttObj.currentViewData[ganttObj.selectedRowIndex].ganttProperties.rowUniqueID;\n                        }\n                        else if (ganttObj.selectionSettings.mode === 'Cell' &&\n                            ganttObj.selectionModule.getSelectedRowCellIndexes().length > 0) {\n                            var selectCellIndex = ganttObj.selectionModule.getSelectedRowCellIndexes();\n                            selectedId = currentViewData[selectCellIndex[selectCellIndex.length - 1].rowIndex].ganttProperties.rowUniqueID;\n                        }\n                    }\n                    if (selectedId) {\n                        ganttObj.scrollToTask(selectedId.toString());\n                    }\n                    break;\n                }\n            case 'focusSearch':\n                {\n                    if (ganttObj.element.querySelector('#' + ganttObj.element.id + '_searchbar')) {\n                        var searchElement = ganttObj.element.querySelector('#' + ganttObj.element.id + '_searchbar');\n                        searchElement.setAttribute('tabIndex', '-1');\n                        searchElement.focus();\n                    }\n                    break;\n                }\n            case 'tab':\n            case 'shiftTab':\n                if (!ganttObj.element.classList.contains('e-scroll-disabled')) {\n                    ganttObj.ganttChartModule.onTabAction(e);\n                }\n                break;\n            case 'contextMenu':\n                {\n                    var contextMenu = document.getElementById(this.parent.element.id +\n                        '_contextmenu').ej2_instances[0];\n                    var containerPosition = this.parent.getOffsetRect(e.target);\n                    var top_1 = containerPosition.top + (containerPosition.height / 2);\n                    var left = containerPosition.left + (containerPosition.width / 2);\n                    this.setActiveElement(e.target);\n                    contextMenu.open(top_1, left);\n                    e.preventDefault();\n                    break;\n                }\n            default:\n                {\n                    var eventArgs = {\n                        requestType: 'keyPressed',\n                        action: e.action,\n                        keyEvent: e\n                    };\n                    ganttObj.trigger('actionComplete', eventArgs);\n                    break;\n                }\n        }\n    };\n    FocusModule.prototype.upDownKeyNavigate = function (e) {\n        e.preventDefault();\n        var ganttObj = this.parent;\n        var expandedRecords = ganttObj.getExpandedRecords(ganttObj.currentViewData);\n        if (ganttObj.selectionModule) {\n            if (ganttObj.selectionSettings.mode !== 'Cell' && ganttObj.selectedRowIndex !== -1) {\n                var selectedItem = ganttObj.currentViewData[ganttObj.selectedRowIndex];\n                var focusedRowIndex = this.parent.ganttChartModule.focusedRowIndex;\n                var selectingRowIndex = focusedRowIndex > -1 ? focusedRowIndex : expandedRecords.indexOf(selectedItem);\n                var currentSelectingRecord = e.action === 'downArrow' ? expandedRecords[selectingRowIndex + 1] :\n                    expandedRecords[selectingRowIndex - 1];\n                ganttObj.selectionModule.selectRow(ganttObj.currentViewData.indexOf(currentSelectingRecord), false, true);\n            }\n            else if (ganttObj.selectionSettings.mode === 'Cell' && ganttObj.selectionModule.getSelectedRowCellIndexes().length > 0) {\n                var selectCellIndex = ganttObj.selectionModule.getSelectedRowCellIndexes();\n                var selectedCellItem = selectCellIndex[selectCellIndex.length - 1];\n                var currentCellIndex = selectedCellItem.cellIndexes[selectedCellItem.cellIndexes.length - 1];\n                var selectedItem = ganttObj.currentViewData[selectedCellItem.rowIndex];\n                var selectingRowIndex = expandedRecords.indexOf(selectedItem);\n                var currentSelectingRecord = e.action === 'downArrow' ? expandedRecords[selectingRowIndex + 1] :\n                    expandedRecords[selectingRowIndex - 1];\n                var cellInfo = {\n                    rowIndex: ganttObj.currentViewData.indexOf(currentSelectingRecord),\n                    cellIndex: currentCellIndex\n                };\n                ganttObj.selectionModule.selectCell(cellInfo);\n            }\n            this.parent.ganttChartModule.focusedRowIndex = this.parent.selectedRowIndex;\n        }\n    };\n    FocusModule.prototype.expandCollapseKey = function (e) {\n        var ganttObj = this.parent;\n        if (ganttObj.selectionModule && ganttObj.selectedRowIndex !== -1) {\n            var selectedRowIndex = void 0;\n            if (ganttObj.selectionSettings.mode !== 'Cell') {\n                selectedRowIndex = ganttObj.selectedRowIndex;\n            }\n            else if (ganttObj.selectionSettings.mode === 'Cell' && ganttObj.selectionModule.getSelectedRowCellIndexes().length > 0) {\n                var selectCellIndex = ganttObj.selectionModule.getSelectedRowCellIndexes();\n                selectedRowIndex = selectCellIndex[selectCellIndex.length - 1].rowIndex;\n            }\n            if (e.action === 'expandRow') {\n                ganttObj.expandByIndex(selectedRowIndex);\n            }\n            else {\n                ganttObj.collapseByIndex(selectedRowIndex);\n            }\n        }\n    };\n    return FocusModule;\n}());\nexport { FocusModule };\n"]},"metadata":{},"sourceType":"module"}